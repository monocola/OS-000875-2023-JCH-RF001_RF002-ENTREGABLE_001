 

--REGISTRAMOS EL ROL
INSERT INTO TBL_ROL (ROL_ID,APLICACION_ID,NOMBRE,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values (SEQ_ROL_ID.NEXTVAL,(SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD'),'Rector SERVIR','1','ADMIN',to_date('18/12/21','DD/MM/RR'),null,null);

--REGISTRAMOS LOS MENUS
INSERT INTO TBL_MENU (MENU_ID,APLICACION_ID,MENU_ID_PADRE,DESCRIPCION,URL,ICONO,NIVEL,ORDEN,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values (SEQ_MENU_ID.NEXTVAL,(SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD'),null,'Solicitudes','/solicitudesExt','work_outline',null,'2','1','ADMIN',to_date('15/12/21','DD/MM/RR'),null,null);
INSERT INTO TBL_MENU (MENU_ID,APLICACION_ID,MENU_ID_PADRE,DESCRIPCION,URL,ICONO,NIVEL,ORDEN,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values (SEQ_MENU_ID.NEXTVAL,(SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD'),null,'Entidad','/entidad','home',null,'2','1','ADMIN',to_date('24/01/22','DD/MM/RR'),null,null);

--ASIGNAMOS MENÚS AL ROL "Gestor_ORH"
INSERT INTO TBL_ROL_MENU (ROL_ID,MENU_ID,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values ((SELECT ROL_ID FROM TBL_ROL WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND NOMBRE = 'Gestor_ORH'),(SELECT MENU_ID FROM TBL_MENU WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND DESCRIPCION = 'Entidad' AND URL = '/entidad'),'1','ADMIN',to_date('15/07/21','DD/MM/RR'),null,null);

--ASIGNAMOS MENÚS AL ROL "Jefe_ORH"
INSERT INTO TBL_ROL_MENU (ROL_ID,MENU_ID,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values ((SELECT ROL_ID FROM TBL_ROL WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND NOMBRE = 'Jefe_ORH'),(SELECT MENU_ID FROM TBL_MENU WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND DESCRIPCION = 'Entidad' AND URL = '/entidad'),'1','ADMIN',to_date('15/07/21','DD/MM/RR'),null,null);

--ASIGNAMOS MENÚS AL ROL "Rector SERVIR"
INSERT INTO TBL_ROL_MENU (ROL_ID,MENU_ID,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values ((SELECT ROL_ID FROM TBL_ROL WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND NOMBRE = 'Rector SERVIR'),(SELECT MENU_ID FROM TBL_MENU WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND DESCRIPCION = 'Tablero informativo' AND URL = '/home'),'1','ADMIN',to_date('15/07/21','DD/MM/RR'),null,null);
INSERT INTO TBL_ROL_MENU (ROL_ID,MENU_ID,ESTADO_REGISTRO,USUARIO_CREACION,FECHA_CREACION,USUARIO_MODIFICACION,FECHA_MODIFICACION) values ((SELECT ROL_ID FROM TBL_ROL WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND NOMBRE = 'Rector SERVIR'),(SELECT MENU_ID FROM TBL_MENU WHERE APLICACION_ID = (SELECT APLICACION_ID FROM TBL_APLICACION WHERE NOMBRE = 'SG MAESTRAS ENTIDAD') AND DESCRIPCION = 'Solicitudes' AND URL = '/solicitudesExt'),'1','ADMIN',to_date('15/07/21','DD/MM/RR'),null,null);

-- Crear rol Jefe ORH para GDR:

INSERT INTO SCH_SEGURIDAD.TBL_ROL
(ROL_ID, APLICACION_ID, NOMBRE, ESTADO_REGISTRO, USUARIO_CREACION, FECHA_CREACION, USUARIO_MODIFICACION, FECHA_MODIFICACION)
VALUES(SEQ_ROL_ID.NEXTVAL, 3, 'Jefe_ORH', '1', 'ADMIN', SYSDATE, NULL, NULL);

-- Asociar el nuevo rol Jefe_ORH de GDR a las opciones del rol Gestor_GDR:

INSERT INTO SCH_SEGURIDAD.TBL_ROL_MENU
(ROL_ID, MENU_ID, ESTADO_REGISTRO, USUARIO_CREACION, FECHA_CREACION, USUARIO_MODIFICACION, FECHA_MODIFICACION)
SELECT (SELECT ROL_ID FROM SCH_SEGURIDAD.TBL_ROL WHERE NOMBRE = 'Jefe_ORH' AND APLICACION_ID = 3), MENU_ID, ESTADO_REGISTRO, 'ADMIN', SYSDATE, NULL, NULL
FROM SCH_SEGURIDAD.TBL_ROL_MENU
WHERE ROL_ID = 12;




