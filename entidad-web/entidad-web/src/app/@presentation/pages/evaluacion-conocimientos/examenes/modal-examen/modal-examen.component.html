<div class="d-flex w-100">
  <span class="flex-spacer"></span>
  <nb-icon
    class="mr-2 btnClose"
    nbSuffix
    icon="close"
    (click)="onNoClick()"
  ></nb-icon>
</div>

<div class="mb-12 col-md-12 divHeaderMargin">
  <div class="flex-v-center flex-column">
    <img
      src="assets/images/icons/check.png"
      style="height: 50px; width: 55px"
      alt="Logo"
    />
    <h6 class="mt-3">{{ titulo }}</h6>
  </div>
</div>

<div class="py-2 mx-2 body container-fluid divMargin">
  <form [formGroup]="registerForm" class="row">
    <div class="mb-8 col-md-8">
      <select-field
        [label]="'Categoría'"
        [control]="f.categoria"
        [items]="categorias"
        [placeholder]="'Seleccione una Categoría'"
        [value]="'categoriaId'"
        [valueToShow]="'descripcion'"
        (selectedChange)="changeCategoria()"
      >
      </select-field>
    </div>

    <div class="mb-4 col-md-4" >
      <div class='container sumatoria'>
        <p style='color: white; padding-top: 10px;'>
          Sumatoria de puntos
        </p>

        <h1 style='color: white; font-size: 2rem'>
          {{sumatoriaPuntos}}
        </h1>
      </div>
    </div>

    <div *ngIf="!isCategoriaSelected" class="mb-12 col-md-12 divBodyTitle">
      <div class="flex-v-center flex-column" style="margin-top: 10px">
        <img
          src="assets/images/icons/bandeja.png"
          style="height: 55px; width: 60px"
          alt="bandeja"
        />
        <h6 class="mt-3">Lista de Preguntas</h6>
      </div>
    </div>
    <div *ngIf="!isCategoriaSelected" class="mb-12 col-md-12">
      <div class="flex-v-center text-center fs-14 px-5">
        <div class="col-10">
          <p class="pText">
            Aquí podrás visualizar y añadir todas las Preguntas de la Categoría
            que hayas seleccionado
          </p>
          <p class="pText">Aún no has seleccionado una Categoría</p>
        </div>
      </div>
    </div>
  </form>
</div>

<div
  *ngIf="isCategoriaSelected"
  class="py-2 mx-2 body container-fluid divMarginDiv"
>
  <div class="row">
    <div class="mb-12 col-md-12">
      <material-table-checkbox
        [cantidadList]="this.cantidadPreguntas"
        [tableData]="this.preguntas"
        [tableColumns]="this.preguntasColumns"
        title="Seleccione Preguntas"
        [isFilterable]="true"
        [isPageable]="true"
        [paginationSizes]="[4, 6, 8]"
        [defaultPageSize]="4"
        [acciones]="true"
        [btnDeleteEnabled]="false"
        [showDownloadButton]="false"
        (checkItemAction)="this.onCheckItem($event)"
        (inputItemAction)='this.onInputItemOut($event)'
        fontSize="fs-14"
        rowHeight="54px"
      >
      </material-table-checkbox>
    </div>
  </div>
</div>

<div *ngIf="isCategoriaSelected" style="position: relative">
  <div style="align-self: center">
    <div class="flex-v-center">
      <div class="col-4">
        <button
          nbButton
          outline
          shape="round"
          status="primary"
          fullWidth
          (click)="onNoClick()"
        >
          Cancelar
        </button>
      </div>
      <div class="col-4">
        <button
          nbButton
          shape="round"
          status="primary"
          fullWidth
          (click)="onClickGuardar()"
        >
          Guardar
        </button>
      </div>
    </div>
  </div>
</div>
